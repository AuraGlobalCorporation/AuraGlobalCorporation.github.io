---
import '../styles/global.css';
import AnimatedLogo from '../components/AnimatedLogo.astro';

interface Props {
  title: string;
  description?: string;
}

const { title, description = 'Aura Global Corporation - The Future of Healthcare Management. HIPAA, GDPR, DPDP Compliant medical inventory management, EMR, and patient portal solutions.' } = Astro.props;
const currentPath = Astro.url.pathname.replace(/\/$/, '') || '/';
---

<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content={description} />
  <meta name="theme-color" content="#0D1B2A" />
  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Aura Global Corporation" />
  <meta name="twitter:card" content="summary_large_image" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <title>{title}</title>

  <script is:inline>
    const theme = (() => {
      if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
        return localStorage.getItem('theme');
      }
      return 'dark';
    })();
    if (theme === 'light') {
      document.documentElement.classList.remove('dark');
    } else {
      document.documentElement.classList.add('dark');
    }
  </script>
</head>
<body class="min-h-screen relative">
  <div class="noise-overlay" aria-hidden="true"></div>

  <!-- Skip to Content -->
  <a href="#main-content" class="sr-only focus:not-sr-only focus:fixed focus:top-4 focus:left-4 focus:z-[9999] btn-primary">
    Skip to main content
  </a>

  <!-- Campaign Banner -->
  <div id="campaign-banner" class="relative z-50 bg-gradient-to-r from-aura-navy via-aura-midnight to-aura-navy dark:from-aura-navy dark:via-aura-midnight dark:to-aura-navy border-b border-aura-cyan/20 overflow-hidden">
    <div class="absolute inset-0 opacity-20">
      <div class="absolute inset-0 bg-[linear-gradient(90deg,transparent_0%,rgba(0,229,255,0.1)_50%,transparent_100%)] animate-shimmer bg-[length:200%_100%]"></div>
    </div>
    <div class="relative flex items-center justify-center gap-3 px-4 py-2.5 text-center">
      <span class="text-xs sm:text-sm font-display font-medium text-aura-text-primary">
        <span class="hidden sm:inline">üéâ LAUNCH SPECIAL:</span>
        <span class="sm:hidden">üéâ</span>
        First 26 Customers Get <span class="text-aura-cyan font-bold">26% OFF</span>
        <span class="mx-2 text-aura-text-muted">|</span>
        <span id="banner-spots" class="text-aura-cyan font-bold">18 spots left</span>
      </span>
      <a href="/offers" class="flex-shrink-0 px-3 py-1 text-xs font-display font-semibold rounded-full bg-aura-cyan/10 text-aura-cyan border border-aura-cyan/30 hover:bg-aura-cyan hover:text-aura-navy transition-all duration-300">
        Claim Discount ‚Üí
      </a>
      <button id="dismiss-banner" class="absolute right-3 top-1/2 -translate-y-1/2 text-aura-text-muted hover:text-aura-text-primary transition-colors" aria-label="Dismiss banner">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
      </button>
    </div>
  </div>

  <!-- Navigation -->
  <header id="site-header" class="sticky top-0 z-40 transition-all duration-300" style="background: var(--nav-bg); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);">
    <div class="border-b transition-colors duration-300" style="border-color: var(--border);">
      <nav class="section-padding flex items-center justify-between h-16 lg:h-20 max-w-[1440px] mx-auto" aria-label="Main navigation">
        <!-- Logo -->
        <a href="/" class="flex items-center gap-3 group" aria-label="Aura Global - Home">
          <AnimatedLogo size={36} />
          <div class="flex flex-col">
            <span class="font-display font-bold text-base leading-tight" style="color: var(--text-primary);">Aura Global</span>
            <span class="text-[10px] font-mono tracking-widest uppercase" style="color: var(--text-muted);">Corporation</span>
          </div>
        </a>

        <!-- Desktop Nav -->
        <div class="hidden lg:flex items-center gap-1">
          {[
            { href: '/', label: 'Home' },
            { href: '/about', label: 'About' },
            { href: '/features', label: 'Features' },
            { href: '/products', label: 'Products' },
            { href: '/services', label: 'Services' },
            { href: '/portfolio', label: 'Portfolio' },
          ].map(link => (
            <a
              href={link.href}
              class:list={[
                'px-4 py-2 rounded-lg text-sm font-display font-medium transition-all duration-200',
                currentPath === link.href
                  ? 'text-[var(--accent)] bg-[var(--accent)]/10'
                  : 'text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--surface)]'
              ]}
            >
              {link.label}
            </a>
          ))}

          <!-- Why a Website? Dropdown -->
          <div class="relative" id="why-dropdown-wrap">
            <button
              id="why-dropdown-btn"
              class:list={[
                'px-4 py-2 rounded-lg text-sm font-display font-medium transition-all duration-200 inline-flex items-center gap-1',
                currentPath.startsWith('/why-website')
                  ? 'text-[var(--accent)] bg-[var(--accent)]/10'
                  : 'text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--surface)]'
              ]}
              aria-expanded="false"
              aria-haspopup="true"
            >
              Why a Website?
              <svg class="w-3.5 h-3.5 transition-transform duration-200" id="why-dropdown-chevron" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M19 9l-7 7-7-7"/></svg>
            </button>
            <div
              id="why-dropdown-menu"
              class="absolute top-full left-0 mt-2 w-64 rounded-xl shadow-2xl border overflow-hidden opacity-0 invisible translate-y-2 transition-all duration-200 z-50"
              style="background: var(--bg-primary); border-color: var(--border);"
            >
              <span class="block px-4 py-2.5 text-xs font-display font-semibold uppercase tracking-wider" style="color: var(--text-muted); border-bottom: 1px solid var(--border); opacity: 0.6;">
                All Business Types
              </span>
              <a
                href="/why-website"
                class:list={[
                  'flex items-center gap-3 px-4 py-2.5 text-sm font-display font-semibold transition-colors hover:bg-[var(--surface)]',
                  currentPath === '/why-website'
                    ? 'text-[var(--accent)] bg-[var(--accent)]/5'
                    : 'text-[var(--text-primary)]'
                ]}
              >
                <span class="text-base">ü©∫</span>
                Doctors / Healthcare
              </a>
              {[
                { href: '/why-website/yoga-teacher', label: 'Yoga Teacher / Studio', icon: 'üßò' },
                { href: '/why-website/salon', label: 'Hair & Beauty Salon', icon: 'üíá' },
                { href: '/why-website/spa', label: 'Spa & Wellness Center', icon: 'üßñ' },
                { href: '/why-website/fitness-trainer', label: 'Fitness Trainer / Gym', icon: 'üí™' },
                { href: '/why-website/restaurant', label: 'Restaurant / Cafe', icon: 'üçΩÔ∏è' },
                { href: '/why-website/consultant', label: 'Consultant / Freelancer', icon: 'üíº' },
                { href: '/why-website/tutor', label: 'Tutor / Coaching Institute', icon: 'üìö' },
                { href: '/why-website/other-services', label: 'Other Service Businesses', icon: 'üè™' },
              ].map(item => (
                <a
                  href={item.href}
                  class:list={[
                    'flex items-center gap-3 px-4 py-2.5 text-sm transition-colors hover:bg-[var(--surface)]',
                    currentPath === item.href
                      ? 'text-[var(--accent)] bg-[var(--accent)]/5'
                      : 'text-[var(--text-secondary)]'
                  ]}
                >
                  <span class="text-base">{item.icon}</span>
                  {item.label}
                </a>
              ))}
            </div>
          </div>

          <a
            href="/contact"
            class:list={[
              'px-4 py-2 rounded-lg text-sm font-display font-medium transition-all duration-200',
              currentPath === '/contact'
                ? 'text-[var(--accent)] bg-[var(--accent)]/10'
                : 'text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--surface)]'
            ]}
          >
            Contact
          </a>
        </div>

        <!-- Right Actions -->
        <div class="flex items-center gap-3">
          <!-- Theme Toggle -->
          <button
            id="theme-toggle"
            class="relative w-10 h-10 rounded-xl flex items-center justify-center transition-all duration-300 hover:bg-[var(--surface)]"
            aria-label="Toggle theme"
          >
            <svg class="w-5 h-5 dark:hidden" style="color: var(--text-secondary);" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>
            </svg>
            <svg class="w-5 h-5 hidden dark:block text-aura-text-secondary" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
            </svg>
          </button>

          <!-- CTA Button (Desktop) -->
          <a href="/contact" class="hidden lg:inline-flex btn-primary text-xs">
            Get Demo
          </a>

          <!-- Mobile Menu Toggle -->
          <button
            id="mobile-menu-btn"
            class="lg:hidden relative w-10 h-10 rounded-xl flex items-center justify-center transition-all hover:bg-[var(--surface)]"
            aria-label="Open menu"
            aria-expanded="false"
          >
            <div class="flex flex-col gap-1.5 w-5">
              <span class="block h-0.5 w-full rounded transition-all duration-300" style="background: var(--text-primary);" id="bar1"></span>
              <span class="block h-0.5 w-full rounded transition-all duration-300" style="background: var(--text-primary);" id="bar2"></span>
              <span class="block h-0.5 w-3 rounded transition-all duration-300 ml-auto" style="background: var(--text-primary);" id="bar3"></span>
            </div>
          </button>
        </div>
      </nav>
    </div>
  </header>

  <!-- Mobile Menu Overlay -->
  <div id="mobile-menu" class="fixed inset-0 z-30 hidden" aria-hidden="true">
    <div class="absolute inset-0" style="background: var(--overlay);"></div>
    <div class="absolute right-0 top-0 bottom-0 w-80 max-w-[85vw] p-8 pt-24 flex flex-col gap-2 shadow-2xl" style="background: var(--bg-primary); border-left: 1px solid var(--border);">
      {[
        { href: '/', label: 'Home' },
        { href: '/about', label: 'About' },
        { href: '/features', label: 'Features' },
        { href: '/products', label: 'Products' },
        { href: '/services', label: 'Services' },
        { href: '/portfolio', label: 'Portfolio' },
      ].map((link, i) => (
        <a
          href={link.href}
          class:list={[
            'mobile-nav-item px-4 py-3 rounded-xl text-lg font-display font-medium transition-all duration-200',
            currentPath === link.href
              ? 'text-[var(--accent)] bg-[var(--accent)]/10'
              : 'text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--surface)]'
          ]}
          style={`opacity: 0; transform: translateX(20px); transition-delay: ${i * 50}ms;`}
        >
          {link.label}
        </a>
      ))}

      <!-- Why a Website? Mobile Expandable -->
      <div class="mobile-nav-item" style="opacity: 0; transform: translateX(20px); transition-delay: 250ms;">
        <button
          id="mobile-why-toggle"
          class:list={[
            'w-full px-4 py-3 rounded-xl text-lg font-display font-medium transition-all duration-200 flex items-center justify-between',
            currentPath.startsWith('/why-website')
              ? 'text-[var(--accent)] bg-[var(--accent)]/10'
              : 'text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--surface)]'
          ]}
        >
          Why a Website?
          <svg class="w-4 h-4 transition-transform duration-200" id="mobile-why-chevron" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M19 9l-7 7-7-7"/></svg>
        </button>
        <div id="mobile-why-submenu" class="overflow-hidden max-h-0 transition-all duration-300">
          <div class="pl-4 pt-1 pb-2 space-y-1">
            <span class="block px-4 py-2 rounded-lg text-xs font-display font-semibold uppercase tracking-wider" style="color: var(--text-muted); opacity: 0.6;">All Business Types</span>
            <a
              href="/why-website"
              class:list={[
                'flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-display font-semibold transition-colors hover:bg-[var(--surface)]',
                currentPath === '/why-website'
                  ? 'text-[var(--accent)]'
                  : 'text-[var(--text-primary)]'
              ]}
            >
              <span>ü©∫</span>
              Doctors / Healthcare
            </a>
            {[
              { href: '/why-website/yoga-teacher', label: 'Yoga Teacher / Studio', icon: 'üßò' },
              { href: '/why-website/salon', label: 'Hair & Beauty Salon', icon: 'üíá' },
              { href: '/why-website/spa', label: 'Spa & Wellness', icon: 'üßñ' },
              { href: '/why-website/fitness-trainer', label: 'Fitness / Gym', icon: 'üí™' },
              { href: '/why-website/restaurant', label: 'Restaurant / Cafe', icon: 'üçΩÔ∏è' },
              { href: '/why-website/consultant', label: 'Consultant', icon: 'üíº' },
              { href: '/why-website/tutor', label: 'Tutor / Coaching', icon: 'üìö' },
              { href: '/why-website/other-services', label: 'Other Services', icon: 'üè™' },
            ].map(item => (
              <a
                href={item.href}
                class:list={[
                  'flex items-center gap-2 px-4 py-2 rounded-lg text-sm transition-colors hover:bg-[var(--surface)]',
                  currentPath === item.href
                    ? 'text-[var(--accent)]'
                    : 'text-[var(--text-muted)]'
                ]}
              >
                <span>{item.icon}</span>
                {item.label}
              </a>
            ))}
          </div>
        </div>
      </div>

      {[
        { href: '/contact', label: 'Contact' },
      ].map((link, i) => (
        <a
          href={link.href}
          class:list={[
            'mobile-nav-item px-4 py-3 rounded-xl text-lg font-display font-medium transition-all duration-200',
            currentPath === link.href
              ? 'text-[var(--accent)] bg-[var(--accent)]/10'
              : 'text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--surface)]'
          ]}
          style={`opacity: 0; transform: translateX(20px); transition-delay: 300ms;`}
        >
          {link.label}
        </a>
      ))}
      <div class="mt-auto pt-6 border-t" style="border-color: var(--border);">
        <a href="/contact" class="btn-primary w-full justify-center text-sm">
          Get Started
        </a>
        <div class="mt-4 flex items-center justify-center gap-4 text-xs" style="color: var(--text-muted);">
          <span>HIPAA</span>
          <span class="w-1 h-1 rounded-full" style="background: var(--border);"></span>
          <span>GDPR</span>
          <span class="w-1 h-1 rounded-full" style="background: var(--border);"></span>
          <span>DPDP</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <main id="main-content" class="relative">
    <slot />
  </main>

  <!-- Footer -->
  <footer class="relative border-t" style="border-color: var(--border); background: var(--bg-secondary);">
    <div class="section-padding max-w-[1440px] mx-auto py-16 lg:py-20">
      <!-- Top Section -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 lg:gap-8 mb-16">
        <!-- Brand Column -->
        <div class="lg:col-span-1">
          <a href="/" class="flex items-center gap-3 mb-5">
            <AnimatedLogo size={36} />
            <div class="flex flex-col">
              <span class="font-display font-bold text-base" style="color: var(--text-primary);">Aura Global</span>
              <span class="text-[10px] font-mono tracking-widest uppercase" style="color: var(--text-muted);">Corporation</span>
            </div>
          </a>
          <p class="text-sm leading-relaxed mb-6" style="color: var(--text-muted);">
            The future of healthcare management. We believe in cooperation, not competition.
          </p>
          <div class="flex items-center gap-2 flex-wrap">
            <span class="badge text-[10px]">HIPAA</span>
            <span class="badge text-[10px]">GDPR</span>
            <span class="badge text-[10px]">DPDP</span>
          </div>
        </div>

        <!-- Products -->
        <div>
          <h4 class="font-display font-semibold text-sm uppercase tracking-wider mb-5" style="color: var(--text-primary);">Products</h4>
          <ul class="space-y-3">
            <li><a href="/features" class="text-sm transition-colors hover:text-[var(--accent)]" style="color: var(--text-muted);">Medical Inventory System</a></li>
            <li><a href="/features#goemr" class="text-sm transition-colors hover:text-[var(--accent)]" style="color: var(--text-muted);">GoEMR</a></li>
            <li><a href="/features#patient-portal" class="text-sm transition-colors hover:text-[var(--accent)]" style="color: var(--text-muted);">Patient Portal</a></li>
            <li><a href="/services" class="text-sm transition-colors hover:text-[var(--accent)]" style="color: var(--text-muted);">Website Development</a></li>
          </ul>
        </div>

        <!-- Company -->
        <div>
          <h4 class="font-display font-semibold text-sm uppercase tracking-wider mb-5" style="color: var(--text-primary);">Company</h4>
          <ul class="space-y-3">
            <li><a href="/about" class="text-sm transition-colors hover:text-[var(--accent)]" style="color: var(--text-muted);">About Us</a></li>
            <li><a href="/portfolio" class="text-sm transition-colors hover:text-[var(--accent)]" style="color: var(--text-muted);">Portfolio</a></li>
            <li><a href="/why-website" class="text-sm transition-colors hover:text-[var(--accent)]" style="color: var(--text-muted);">Why a Website?</a></li>
            <li><a href="/contact" class="text-sm transition-colors hover:text-[var(--accent)]" style="color: var(--text-muted);">Contact</a></li>
          </ul>
        </div>

        <!-- Contact -->
        <div>
          <h4 class="font-display font-semibold text-sm uppercase tracking-wider mb-5" style="color: var(--text-primary);">Get in Touch</h4>
          <ul class="space-y-3">
            <li class="text-sm" style="color: var(--text-muted);">hello@auraglobalcorp.com</li>
            <li class="text-sm" style="color: var(--text-muted);">+91-XXX-XXX-XXXX</li>
            <li class="text-sm" style="color: var(--text-muted);">Mon-Fri 9AM - 6PM IST</li>
            <li class="text-sm" style="color: var(--text-muted);">Sat 10AM - 2PM IST</li>
          </ul>
        </div>
      </div>

      <!-- Values Strip -->
      <div class="py-6 mb-8 border-y flex flex-wrap justify-center gap-x-8 gap-y-3 text-xs" style="border-color: var(--border); color: var(--text-muted);">
        <span class="flex items-center gap-2">üí° We believe in cooperation, not competition</span>
        <span class="flex items-center gap-2">üå± Digital-first for a sustainable future</span>
        <span class="flex items-center gap-2">‚úì HIPAA, GDPR, DPDP Compliant</span>
        <span class="flex items-center gap-2">üåç Please consider the environment before printing</span>
      </div>

      <!-- Bottom Bar -->
      <div class="flex flex-col sm:flex-row items-center justify-between gap-4 text-xs" style="color: var(--text-muted);">
        <p>¬© {new Date().getFullYear()} Aura Global Corporation. All rights reserved.</p>
        <div class="flex items-center gap-6">
          <a href="/privacy" class="hover:text-[var(--accent)] transition-colors">Privacy Policy</a>
          <a href="/terms" class="hover:text-[var(--accent)] transition-colors">Terms of Service</a>
          <a href="/hipaa-notice" class="hover:text-[var(--accent)] transition-colors">HIPAA Notice</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Theme Toggle Script -->
  <script is:inline>
    const toggle = document.getElementById('theme-toggle');
    toggle?.addEventListener('click', () => {
      const isDark = document.documentElement.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      document.querySelector('meta[name="theme-color"]')?.setAttribute('content', isDark ? '#0D1B2A' : '#F7FBFF');
    });

    // Mobile menu
    const menuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    const bar1 = document.getElementById('bar1');
    const bar2 = document.getElementById('bar2');
    const bar3 = document.getElementById('bar3');
    let menuOpen = false;

    menuBtn?.addEventListener('click', () => {
      menuOpen = !menuOpen;
      menuBtn.setAttribute('aria-expanded', String(menuOpen));
      mobileMenu.classList.toggle('hidden', !menuOpen);
      mobileMenu.setAttribute('aria-hidden', String(!menuOpen));

      if (menuOpen) {
        bar1.style.transform = 'rotate(45deg) translate(3.5px, 3.5px)';
        bar2.style.opacity = '0';
        bar3.style.transform = 'rotate(-45deg) translate(3.5px, -3.5px)';
        bar3.style.width = '100%';
        bar3.style.marginLeft = '0';
        document.querySelectorAll('.mobile-nav-item').forEach(item => {
          item.style.opacity = '1';
          item.style.transform = 'translateX(0)';
        });
      } else {
        bar1.style.transform = '';
        bar2.style.opacity = '1';
        bar3.style.transform = '';
        bar3.style.width = '';
        bar3.style.marginLeft = '';
        document.querySelectorAll('.mobile-nav-item').forEach(item => {
          item.style.opacity = '0';
          item.style.transform = 'translateX(20px)';
        });
      }
    });

    // Close mobile menu on overlay click
    mobileMenu?.addEventListener('click', (e) => {
      if (e.target === mobileMenu || e.target === mobileMenu.firstElementChild) {
        menuBtn?.click();
      }
    });

    // Dismiss campaign banner
    const dismissBtn = document.getElementById('dismiss-banner');
    const banner = document.getElementById('campaign-banner');
    dismissBtn?.addEventListener('click', () => {
      banner.style.maxHeight = banner.offsetHeight + 'px';
      requestAnimationFrame(() => {
        banner.style.transition = 'max-height 0.3s ease, opacity 0.3s ease';
        banner.style.maxHeight = '0';
        banner.style.opacity = '0';
        banner.style.overflow = 'hidden';
      });
    });

    // Sticky header shrink
    let lastScroll = 0;
    window.addEventListener('scroll', () => {
      const header = document.getElementById('site-header');
      const scrollY = window.scrollY;
      if (scrollY > 100) {
        header.style.boxShadow = '0 4px 30px rgba(0,0,0,0.15)';
      } else {
        header.style.boxShadow = 'none';
      }
      lastScroll = scrollY;
    }, { passive: true });

    // Campaign counter fetch
    async function fetchCampaignData() {
      try {
        const res = await fetch('/campaign-data.json');
        const data = await res.json();
        const bannerSpots = document.getElementById('banner-spots');
        if (bannerSpots) {
          bannerSpots.textContent = data.spotsRemaining + ' spots left';
          if (data.spotsRemaining < 10) {
            bannerSpots.classList.add('text-red-400');
          }
        }
      } catch (e) {
        // Fallback already set in HTML
      }
    }
    fetchCampaignData();

    // Desktop "Why a Website?" dropdown
    const whyBtn = document.getElementById('why-dropdown-btn');
    const whyMenu = document.getElementById('why-dropdown-menu');
    const whyChevron = document.getElementById('why-dropdown-chevron');
    const whyWrap = document.getElementById('why-dropdown-wrap');
    let whyOpen = false;

    function toggleWhyDropdown(open) {
      whyOpen = open;
      whyBtn?.setAttribute('aria-expanded', String(open));
      if (open) {
        whyMenu.style.opacity = '1';
        whyMenu.style.visibility = 'visible';
        whyMenu.style.transform = 'translateY(0)';
        whyChevron.style.transform = 'rotate(180deg)';
      } else {
        whyMenu.style.opacity = '0';
        whyMenu.style.visibility = 'hidden';
        whyMenu.style.transform = 'translateY(8px)';
        whyChevron.style.transform = 'rotate(0deg)';
      }
    }

    whyBtn?.addEventListener('click', (e) => {
      e.stopPropagation();
      toggleWhyDropdown(!whyOpen);
    });

    document.addEventListener('click', (e) => {
      if (whyOpen && !whyWrap?.contains(e.target)) {
        toggleWhyDropdown(false);
      }
    });

    // Mobile "Why a Website?" expandable
    const mobileWhyToggle = document.getElementById('mobile-why-toggle');
    const mobileWhySubmenu = document.getElementById('mobile-why-submenu');
    const mobileWhyChevron = document.getElementById('mobile-why-chevron');

    mobileWhyToggle?.addEventListener('click', () => {
      const isOpen = mobileWhySubmenu.style.maxHeight && mobileWhySubmenu.style.maxHeight !== '0px';
      if (isOpen) {
        mobileWhySubmenu.style.maxHeight = '0px';
        mobileWhyChevron.style.transform = 'rotate(0deg)';
      } else {
        mobileWhySubmenu.style.maxHeight = mobileWhySubmenu.scrollHeight + 'px';
        mobileWhyChevron.style.transform = 'rotate(180deg)';
      }
    });
  </script>
</body>
</html>
